
# Elementary test wrapper configuration for DIF v1.5
# Provides observability monitoring on test results

version: 2

models:
  - name: dif_config_driven_tests
    description: |
      Config-driven DIF tests with elementary monitoring.
      Elementary monitors track test result anomalies over time.
    config:
      tags: ['dif_v15', 'elementary']
      meta:
        owner: 'dif_team'
        monitoring: 'elementary'
        
    # Elementary monitors for test result anomalies
    tests:
      # Monitor for unusual test volumes
      - elementary.volume_anomalies:
          timestamp_column: executed_at
          time_bucket:
            period: hour
            count: 1
          sensitivity: 3
          tags: ['dif_monitoring']
          config:
            severity: warn
          
      # Monitor for schema changes in test results
      - elementary.schema_changes:
          tags: ['dif_monitoring']
          config:
            severity: warn

# Elementary freshness monitoring for control tables
exposures:
  - name: dif_control_plane_monitoring
    description: "Elementary monitoring for DIF control plane tables"
    type: dashboard
    maturity: high
    owner:
      name: DIF Team
      email: dif-team@example.com
    depends_on:
      - source('config_controls', 'rules')
      - source('config_controls', 'data_assets')
      - source('audit_controls', 'dq_log')
      - source('audit_controls', 'run_metadata')
